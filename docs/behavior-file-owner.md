Поведение "Владелец файла"
==========================

Поведение разработанно для поддержания совместимости форм с компонентом файлового хранища.

Файловый компонент дополняет свою запись идентификатором владельца файла, что по факту
требует привязки поведения загрузки к `ActiveRecord` модели, потому что для назначения идентификатора
связи используется метод `getPrimaryKey()`, который отсутствует в модели формы.

Настройка
---------

Поведение имеет расширеный диапазон способов прокинуть идентификатор,
простейшией из которых является обращение к владельцу файла и получение у него
идентификатора через его метод `getPrimaryKey()`, кем бы он не был.

```php
public function behaviors()
{
    return [
        [
            'class' => \chulakov\components\behaviors\FileOwnerBehavior::class,
            'fileOwner' => $this->model,
            'property' => 'file_id',
            'defaultValue' => 0,
        ]
    ];
}
```

В свойства владельца поведения можно прописать дополнительную анатацию в DocBlock:

```php
 * @method setFileOwner(Model $owner)
 * @method int getPrimaryKey()
```

Метод `setFileOwner()` позволяет указать только что созданного владельца файла,
при создании новой записи в базе данных, или передать через него модель при
обновлении записи, в том числе при инициализации поведения.

Метод `getPrimaryKey()` собственно и выполняет необходимую работу по получению
идентификатора владельца файла путем поиска его исходя из настроек поведения.

Свойство $property
------------------

Определяет свойство, которое является первичным ключем для модели владельца.
Если указана строка, то поиск осуществляется в полях `ActiveRecord` или в свойствах
модели/объекта.

Свойство может быть задано как замыкание, и тогда не потребуется явно указывать
модель владельца файла. Замыкание может принимать два параметра, модель самого
владельца поведения и указанной модели владельца файла.

```php
'property' => function(Model $owner, $fileOwner = null) {
    return $owner->getModel()->getPrimaryKey();
}
```

> **Внимание:** Если, и только если, свойство не указано, будет произведена
> попытка обратиться к модели владельца файла за получением первичного ключа.

Свойство $defaultValue
----------------------

Свойство, которое будет возвращено при отсутствии возможности получить первичный
ключ их модели или замыкания. По умолчанию равно 0, что соответствует отсутствию
связи с каким либо владельцем. Измененеи позволит привязать файл к какой либо
определенно записи.
